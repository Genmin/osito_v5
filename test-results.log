[0;34m=== 🚀 OSITO PROTOCOL - WORLD CLASS MAXIMALLY RIGOROUS TEST SUITE 🚀 ===[0m
[0;35m🔥 CRITICAL: ENSURING 100% READINESS TO HOLD USER FUNDS ON MAINNET[0m

[0;34m=== Phase 1: Unit Testing - Core Functionality Verification ===[0m
[0;32m[INFO][0m Running comprehensive unit tests for all contracts...
No files changed, compilation skipped

Ran 16 tests for test/foundry/unit/CollateralVault.t.sol:CollateralVaultTest
[PASS] test_Borrow() (gas: 233824)
[PASS] test_CannotBorrowExceedingPMin() (gas: 133167)
[PASS] test_CannotMarkHealthyPosition() (gas: 292918)
[PASS] test_CannotRecoverDuringGracePeriod() (gas: 328504)
[PASS] test_CannotWithdrawWithDebt() (gas: 235068)
[PASS] test_DepositCollateral() (gas: 103685)
[PASS] test_EmptyPosition() (gas: 26412)
[PASS] test_GetAccountState() (gas: 244351)
[PASS] test_InterestAccrual() (gas: 274916)
[PASS] test_MarkOTM() (gas: 324015)
[PASS] test_MultipleUsers() (gas: 473279)
[PASS] test_PartialRepay() (gas: 266893)
[PASS] test_PositionHealth() (gas: 282207)
[PASS] test_Recovery() (gas: 339890)
[PASS] test_RepayDebt() (gas: 257800)
[PASS] test_WithdrawCollateral() (gas: 102116)
Suite result: ok. 16 passed; 0 failed; 0 skipped; finished in 5.39ms (2.96ms CPU time)

Ran 11 tests for test/foundry/unit/FeeRouter.t.sol:FeeRouterTest
[PASS] test_CannotBurnLPTokens() (gas: 356537)
[PASS] test_CollectFees() (gas: 229391)
[PASS] test_Constructor() (gas: 10661)
[PASS] test_EmptyFeeRouter() (gas: 3062956)
[PASS] test_FeeRouterIntegration() (gas: 143670)
[PASS] test_GasFeeCollection() (gas: 135858)
[PASS] test_InitialState() (gas: 10464)
[PASS] test_LPTokenRestrictions() (gas: 10071)
[PASS] test_MultipleFeeCollections() (gas: 481936)
[PASS] test_OnlyPairCanCollectFees() (gas: 19082)
[PASS] test_TreasuryAddress() (gas: 8713)
Suite result: ok. 11 passed; 0 failed; 0 skipped; finished in 5.43ms (3.51ms CPU time)

Ran 20 tests for test/foundry/unit/LenderVault.t.sol:LenderVaultTest
[PASS] testFuzz_Deposit(uint256) (runs: 50000, μ: 110993, ~: 111052)
[PASS] test_AccrueInterest() (gas: 117354)
[PASS] test_BorrowingIntegration() (gas: 100439)
[PASS] test_Constructor() (gas: 22526)
[PASS] test_Deposit() (gas: 108200)
[PASS] test_DepositFor() (gas: 111548)
[PASS] test_EmptyVaultWithdraw() (gas: 24841)
[PASS] test_GasDeposit() (gas: 106484)
[PASS] test_GasWithdraw() (gas: 119657)
[PASS] test_InitialState() (gas: 21739)
[PASS] test_InsufficientBalance() (gas: 107108)
[PASS] test_InterestRate() (gas: 14726)
[PASS] test_Mint() (gas: 107775)
[PASS] test_OnlyAuthorizedCanBorrow() (gas: 109530)
[PASS] test_PreviewFunctions() (gas: 24892)
[PASS] test_Redeem() (gas: 118235)
[PASS] test_SharePrice() (gas: 107897)
[PASS] test_Withdraw() (gas: 120121)
[PASS] test_WithdrawFor() (gas: 152907)
[PASS] test_ZeroDeposit() (gas: 41419)
Suite result: ok. 20 passed; 0 failed; 0 skipped; finished in 2.58s (2.58s CPU time)

Ran 26 tests for test/foundry/unit/OsitoToken.t.sol:OsitoTokenTest
[PASS] testFuzz_ApproveAndTransferFrom(address,address,uint256,uint256) (runs: 50000, μ: 74491, ~: 75879)
[PASS] testFuzz_Burn(uint256) (runs: 50000, μ: 29233, ~: 29302)
[PASS] testFuzz_Constructor(string,string,uint256,address) (runs: 50000, μ: 746571, ~: 746384)
[PASS] testFuzz_MetadataURI(string) (runs: 50000, μ: 715262, ~: 714829)
[PASS] testFuzz_Transfer(address,uint256) (runs: 50000, μ: 46711, ~: 46948)
[PASS] test_Approve() (gas: 39043)
[PASS] test_ApproveToZeroAddress() (gas: 34872)
[PASS] test_Burn() (gas: 25763)
[PASS] test_BurnFullBalance() (gas: 15528)
[PASS] test_BurnInsufficientBalance() (gas: 13898)
[PASS] test_BurnZeroAmount() (gas: 20503)
[PASS] test_Constructor() (gas: 30872)
[PASS] test_EmptyMetadataURI() (gas: 671561)
[PASS] test_GasBurn() (gas: 26922)
[PASS] test_GasTransfer() (gas: 46341)
[PASS] test_MetadataURI() (gas: 12779)
[PASS] test_MultipleBurns() (gas: 87473)
[PASS] test_Transfer() (gas: 44494)
[PASS] test_TransferFrom() (gas: 55158)
[PASS] test_TransferFromInsufficientAllowance() (gas: 41754)
[PASS] test_TransferFromMaxAllowance() (gas: 72180)
[PASS] test_TransferFullBalance() (gas: 40440)
[PASS] test_TransferInsufficientBalance() (gas: 16364)
[PASS] test_TransferToSelf() (gas: 16665)
[PASS] test_TransferToZeroAddress() (gas: 45121)
[PASS] test_TransferZeroAmount() (gas: 22886)
Suite result: ok. 26 passed; 0 failed; 0 skipped; finished in 5.54s (12.66s CPU time)

Ran 18 tests for test/foundry/unit/LendingFactory.t.sol:LendingFactoryTest
[PASS] testFuzz_CreateLendingMarket(string,string,uint256,uint256) (runs: 50000, μ: 4622823, ~: 4610171)
[PASS] test_CannotCreateDuplicateMarket() (gas: 4605730)
[PASS] test_Constructor() (gas: 14259)
[PASS] test_CreateLendingMarket() (gas: 4607076)
[PASS] test_CreateMarketInvalidPair() (gas: 16187)
[PASS] test_CreateMarketZeroAddress() (gas: 11351)
[PASS] test_CreateMultipleMarkets() (gas: 9168252)
[PASS] test_EndToEndLendingFlow() (gas: 4928604)
[PASS] test_FactoryConsistency() (gas: 23244926)
[PASS] test_FactoryState() (gas: 15157)
[PASS] test_GasCreateMarket() (gas: 4607341)
[PASS] test_GetCollateralVault() (gas: 4605298)
[PASS] test_LenderVaultCreation() (gas: 26057)
[PASS] test_LenderVaultSharing() (gas: 9169108)
[PASS] test_MarketCreationOrder() (gas: 9167551)
[PASS] test_MultipleMarketsIntegration() (gas: 9261752)
[PASS] test_NonExistentMarket() (gas: 8339)
[PASS] test_PermissionlessMarketCreation() (gas: 4607532)
Suite result: ok. 18 passed; 0 failed; 0 skipped; finished in 10.62s (10.63s CPU time)

Ran 18 tests for test/foundry/unit/OsitoPair.t.sol:OsitoPairTest
[PASS] testFuzz_Swap(uint256,bool) (runs: 50000, μ: 112021, ~: 125492)
[PASS] testFuzz_pMinMonotonicity(uint256,uint256) (runs: 50000, μ: 178999, ~: 179866)
[PASS] test_CannotCallSyncOrSkim() (gas: 10494)
[PASS] test_FeeCollection() (gas: 232627)
[PASS] test_FeeDecay() (gas: 104801)
[PASS] test_GasSwap() (gas: 93797)
[PASS] test_InitialPMin() (gas: 21681)
[PASS] test_InitialReserves() (gas: 9712)
[PASS] test_Initialization() (gas: 26525)
[PASS] test_LPTransferRestriction() (gas: 10877)
[PASS] test_MinimumLiquidityLocked() (gas: 8371)
[PASS] test_OnlyFeeRouterCanHoldLP() (gas: 17320)
[PASS] test_SwapExactTokensForWETH() (gas: 145395)
[PASS] test_SwapExactWETHForTokens() (gas: 124074)
[PASS] test_SwapMaintainsK() (gas: 93513)
[PASS] test_SwapWithHighInitialFee() (gas: 16330)
[PASS] test_pMinIncreasesWithBurns() (gas: 87701)
[PASS] test_pMinNeverDecreases() (gas: 188727)
Suite result: ok. 18 passed; 0 failed; 0 skipped; finished in 11.35s (14.62s CPU time)

Ran 12 tests for test/foundry/unit/PMinLib.t.sol:PMinLibTest
[PASS] testFuzz_Calculate(uint256,uint256,uint256,uint256) (runs: 50000, μ: 8163, ~: 8170)
[PASS] testFuzz_MonotonicWithKIncrease(uint256,uint256,uint256,uint256) (runs: 50000, μ: 9161, ~: 9236)
[PASS] testFuzz_MonotonicWithSupplyBurn(uint256,uint256,uint256,uint256) (runs: 50000, μ: 9317, ~: 9257)
[PASS] test_AllTokensInPool() (gas: 359)
[PASS] test_BasicCalculation() (gas: 209)
[PASS] test_GasCalculation() (gas: 3790)
[PASS] test_HighFeeImpact() (gas: 304)
[PASS] test_MaximalValues() (gas: 370)
[PASS] test_MinimalReserves() (gas: 414)
[PASS] test_NoTokensInPool() (gas: 634)
[PASS] test_PrecisionAt18Decimals() (gas: 480)
[PASS] test_RoundingBehavior() (gas: 658)
Suite result: ok. 12 passed; 0 failed; 0 skipped; finished in 11.35s (5.14s CPU time)

Ran 17 tests for test/foundry/unit/OsitoLaunchpad.t.sol:OsitoLaunchpadTest
[PASS] testFuzz_LaunchToken(string,string,uint256,uint256,uint256,uint256) (runs: 50000, μ: 3084173, ~: 3068165)
[PASS] test_Constructor() (gas: 10673)
[PASS] test_EmptyMetadataURI() (gas: 3034689)
[PASS] test_ExtremeFeesValid() (gas: 3074955)
[PASS] test_GasLaunchToken() (gas: 3055963)
[PASS] test_InsufficientWETHAllowance() (gas: 2893472)
[PASS] test_InsufficientWETHBalance() (gas: 2893691)
[PASS] test_InvalidFeeRange() (gas: 42804)
[PASS] test_LPTokensLocked() (gas: 3055734)
[PASS] test_LargeSupply() (gas: 3047799)
[PASS] test_LaunchAndSwap() (gas: 3099047)
[PASS] test_LaunchToken() (gas: 3074969)
[PASS] test_MetadataURI() (gas: 3100825)
[PASS] test_MinimalSupply() (gas: 3053325)
[PASS] test_PermissionlessLaunch() (gas: 3077492)
[PASS] test_TokenLaunchedEvent() (gas: 3064356)
[PASS] test_ValidFeeRange() (gas: 3052227)
Suite result: ok. 17 passed; 0 failed; 0 skipped; finished in 17.83s (17.83s CPU time)

Ran 8 test suites in 17.83s (59.29s CPU time): 138 tests passed, 0 failed, 0 skipped (138 total tests)
[0;32m✅ Unit Tests PASSED - All core functionality verified[0m
[0;34m=== Phase 2: Fuzz Testing - Property-Based Validation ===[0m
[0;32m[INFO][0m Running comprehensive fuzz tests with random inputs...
No files changed, compilation skipped

Ran 14 tests for test/foundry/fuzz/ComprehensiveFuzzTests.t.sol:ComprehensiveFuzzTests
[PASS] testFuzz_BorrowingWithinLimits(uint256,uint256) (runs: 10000, μ: 135032, ~: 135084)
[PASS] testFuzz_CollateralDeposit(uint256) (runs: 10000, μ: 108896, ~: 108796)
[PASS] testFuzz_ExtremeValues(uint256) (runs: 10000, μ: 30544, ~: 43495)
[PASS] testFuzz_FeeDecay(uint256) (runs: 10000, μ: 42577, ~: 42637)
[PASS] testFuzz_GasConsumption(uint256) (runs: 10000, μ: 27803, ~: 27661)
[PASS] testFuzz_OperationSequence(uint256,uint256,uint256) (runs: 10000, μ: 170486, ~: 175119)
[PASS] testFuzz_PMinBehavior(uint256,uint256) (runs: 10000, μ: 85445, ~: 88871)
[PASS] testFuzz_PMinCalculation(uint256,uint256,uint256,uint256) (runs: 10000, μ: 9499, ~: 9560)
[PASS] testFuzz_PMinMonotonicity(uint256) (runs: 10000, μ: 28584, ~: 28653)
[PASS] testFuzz_PairSwap(uint256,bool) (runs: 10000, μ: 63934, ~: 72131)
[PASS] testFuzz_Repayment(uint256,uint256,uint256) (runs: 10000, μ: 145649, ~: 136810)
[PASS] testFuzz_TokenApproval(address,uint256) (runs: 10000, μ: 58646, ~: 58872)
[PASS] testFuzz_TokenBurn(uint256) (runs: 10000, μ: 29967, ~: 29948)
[PASS] testFuzz_TokenTransfer(address,uint256) (runs: 10000, μ: 52759, ~: 52922)
Suite result: ok. 14 passed; 0 failed; 0 skipped; finished in 1.49s (8.57s CPU time)

Ran 1 test suite in 1.49s (1.49s CPU time): 14 tests passed, 0 failed, 0 skipped (14 total tests)
[0;32m✅ Fuzz Tests PASSED - Properties hold under random inputs[0m
[0;34m=== Phase 3: Invariant Testing - Protocol Invariant Verification ===[0m
[0;32m[INFO][0m Running invariant tests to verify critical protocol invariants...
No files changed, compilation skipped

Ran 4 tests for test/foundry/invariant/SimpleInvariants.t.sol:SimpleInvariantsTest
[PASS] invariant_kNeverDecreases() (runs: 5000, calls: 2500000, reverts: 2033976)
[PASS] invariant_pMinNeverDecreases() (runs: 5000, calls: 2500000, reverts: 2034138)
[PASS] invariant_supplyOnlyDecreases() (runs: 5000, calls: 2500000, reverts: 2034175)
[PASS] invariant_tokenConservation() (runs: 5000, calls: 2500000, reverts: 2034066)
Suite result: ok. 4 passed; 0 failed; 0 skipped; finished in 51.42s (181.02s CPU time)

Ran 1 test suite in 51.42s (51.42s CPU time): 4 tests passed, 0 failed, 0 skipped (4 total tests)
[0;32m✅ Invariant Tests PASSED - All critical invariants maintained[0m
[0;34m=== Phase 4: Fork Testing - Mainnet Integration Validation ===[0m
[0;32m[INFO][0m Running fork tests against mainnet state...
[1;33m[WARNING][0m MAINNET_RPC_URL not set - skipping fork tests
[0;34m=== Phase 5: Formal Verification - Mathematical Proof Validation ===[0m
[0;32m[INFO][0m Running formal verification tests...
Compiling 1 files with Solc 0.8.24
Solc 0.8.24 finished in 14.82s
Compiler run successful with warnings:
Warning (2072): Unused local variable.
   --> test/foundry/BaseTest.t.sol:215:9:
    |
215 |         address token1 = pair.token1();
    |         ^^^^^^^^^^^^^^

Warning (2072): Unused local variable.
   --> test/foundry/formal/FormalVerification.t.sol:333:9:
    |
333 |         uint256 borrowTime = block.timestamp;
    |         ^^^^^^^^^^^^^^^^^^

Warning (2018): Function state mutability can be restricted to view
   --> test/foundry/formal/FormalVerification.t.sol:246:5:
    |
246 |     function test_FormalProof_FeeDecayFunction() public {
    |     ^ (Relevant source part starts here and spans across multiple lines).

Warning (2018): Function state mutability can be restricted to pure
   --> test/foundry/formal/FormalVerification.t.sol:359:5:
    |
359 |     function test_FormalProof_ArithmeticSafety() public {
    |     ^ (Relevant source part starts here and spans across multiple lines).


Ran 11 tests for test/foundry/formal/FormalVerification.t.sol:FormalVerificationTest
[PASS] test_FormalProof_ArithmeticSafety() (gas: 1436)
[PASS] test_FormalProof_ConstantProduct() (gas: 118406)
[PASS] test_FormalProof_FeeDecayFunction() (gas: 22757)
[PASS] test_FormalProof_InterestAccrual() (gas: 370104)
[PASS] test_FormalProof_LPTokenRestriction() (gas: 23967)
[PASS] test_FormalProof_PMinCalculation() (gas: 24094)
[PASS] test_FormalProof_PMinMonotonicity() (gas: 132127)
[PASS] test_FormalProof_PrincipalRecoveryGuarantee() (gas: 331748)
[PASS] test_FormalProof_ReentrancyProtection() (gas: 204230)
[PASS] test_FormalProof_StateTransitionValidity() (gas: 164322)
[PASS] test_FormalProof_TokenConservation() (gas: 155837)
Suite result: ok. 11 passed; 0 failed; 0 skipped; finished in 2.07ms (1.70ms CPU time)

Ran 1 test suite in 98.60ms (2.07ms CPU time): 11 tests passed, 0 failed, 0 skipped (11 total tests)
[0;32m✅ Formal Verification PASSED - Mathematical properties proven[0m
[0;34m=== Phase 6: Static Analysis - Security Vulnerability Scanning ===[0m
[0;32m[INFO][0m Running comprehensive static analysis...
🔍 Starting Comprehensive Static Analysis for Osito Protocol
[0;32m[INFO][0m Building contracts...
Compiling 18 files with Solc 0.8.24
